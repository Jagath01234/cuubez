= Embedded jetty with Cuubez=

In this tutorial, we show you how to develop a simple RESTfull web service application with embedded jetty server using cuubez framwork.

Technologies and Tools used in this article:

 # cuubez 1.1.1
 # JDK 1.6
 # Tomcat 6.0
 # Maven 3.0.3
 # Intellij IDEA 13.1.1

*Note:* If you want to know what and how REST works, just search on Google, ton of available resources.


== 1. Directory Structure ==
This is the final web project structure of this tutorial.

== 2. Standard Java Project ==
Create a standard Maven java project structure.

{{{
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
}}}

*Note:* To support IntelliJ IDEA, use Maven command :
{{{
mvn idea:idea
}}}

== 3. Project Dependencies ==

Following maven dependencies should add to the pom.xml file.

_File : pom.xml_

==4. REST Service==

{{{

@Path("/users/{userId}")
@Produces(MediaType.APPLICATION_JSON)
public class UserResource {

    private static Log log = LogFactory.getLog(UserResource.class);


    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response userGet(@HeaderParam(value = "name") String name, @PathParam(value = "userId") String id, @QueryParam(value = "age") Double age) {

        User user = new User(id, age, name);
        return Response.ok().entity(user).build();
    }

    @Consumes(MediaType.APPLICATION_JSON)
    @POST
    public void userPost(User user) {
        log.info("POST = [" + user + "]");
    }

    @PUT
    @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
    public void userPut(User user) {
        log.info("PUT = [" + user + "]");

    }

}
}}}

==5. Embedded Jetty Implementation ==

{{{

public class JettyServer {

    public static void main(String args[]) {

        Server server = new Server(8081);
        ServletContextHandler handler = new ServletContextHandler(ServletContextHandler.SESSIONS);          
        server.setHandler(handler);
        handler.setContextPath("/");
        handler.setResourceBase(".");
        handler.addEventListener(new BootstrapContextListener());  //cuubez bootstrap context listner
        handler.addServlet(HttpServletDispatcher.class, "/*"); //servlet filter


        try {

            server.start();
            server.join();
            
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
}

==6. Demo ==